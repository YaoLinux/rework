# Depends on : kf5-extra-cmake-modules postgresql kf5-kdesignerplugin qt-tools boost kf5-kio kf5-kitemmodels mariadb 

description="PIM layer, which provides an asynchronous API to access all kind of PIM data "
url="https://projects.kde.org/akonadi"
packager="pierre at nutyx dot org"
run=(mariadb)

name=akonadi
version=17.04.2
release=2

source=(http://download.kde.org/stable/applications/$version/src/$name-$version.tar.xz
       akonadi-kdebug-380182.patch)

build() {
  cd $name-$version
  patch -p1 -i ../akonadi-kdebug-380182.patch
  mkdir ../build
  cd ../build
  cmake ../$name-$version       \
    -DCMAKE_BUILD_TYPE=Release  \
    -DCMAKE_INSTALL_PREFIX=/usr \
    -DKDE_INSTALL_LIBDIR=lib  \
    -DBUILD_TESTING=OFF         \
    -Wno-dev
  make
  make DESTDIR=$PKG install
}
