# Description: Port of Webkit to Fltk 1.3
# URL: https://github.com/clbr/${name}/
# Packager: Chris Farrell, timcowchip at gmail dot com
# Maintainer: Chris Farrell, timcowchip at gmail dot com
# Depends on: zlib libpng libjpeg-turbo libxml2 sqlite freetype xorg-fontconfig cairo openssl curl icu harfbuzz fltk1 git ruby

name=webkitfltk
version=0.1.1
release=2

source=()

build() {
	git clone https://github.com/clbr/webkitfltk.git
	cd "${SRC}/${name}"
	sed -i "s@isnan@std::isnan@g" Source/WebCore/platform/spi/cg/CoreGraphicsSPI.h
	sed -i "s@isnan@std::isnan@g" Source/WTF/wtf/Stopwatch.h
	sed -i "s@isnan@std::isnan@g" Source/JavaScriptCore/runtime/Options.cpp
	make -C Source/WTF/wtf
	make -C Source/JavaScriptCore gen
	make -C Source/JavaScriptCore
	make -C Source/WebCore
	make -C Source/WebKit/fltk

	make -C Source/WebKit/fltk install DESTDIR="${PKG}"
}
