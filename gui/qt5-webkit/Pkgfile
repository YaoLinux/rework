# URL: http://qt-project.org/
# Packager: pierre at nutyx dot org, tnut at nutyx dot org, fanch at nutyx dot org
# Depends on:gstreamer1-plugins-base libwebp xorg-libxcomposite xorg-libxslt gstreamer1-plugins-good gperf python ruby

description="Classes for a WebKit2 based implementation and a new QML API"
name=qt5-webkit
release=1
_version=${version/-/}
_name=qtwebkit-opensource-src-${_version}
_namefqn="${name/5-/}-opensource-src-${_version}"

source=(http://download.qt-project.org/community_releases/${_version%.*}/${_version}/${_name}.tar.xz)

build() {

cd ${_namefqn}
syncqt.pl-qt5 -version $version Source/sync.profile
mkdir build
cd build
export PATH="${SRC}/bin:$PATH"
qmake ../${_namefqn}
make INSTALL_ROOT="$PKG" install

# Drop QMAKE_PRL_BUILD_DIR because reference the build dir
find "$pkg/usr/lib" -type f -name '*.prl' \
    -exec sed -i -e '/^QMAKE_PRL_BUILD_DIR/d' {} \;


}
