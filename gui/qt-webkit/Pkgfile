# Depends on: qt-base qt-location qt-sensors qt-webchannel qt-doc qt-tools ruby icu libjpeg-turbo libpng libwebp libxslt gstreamer-plugins-base gstreamer-plugins-good gperf xorg-libxcomposite sqlite 

description="Classes for a WebKit2 based implementation and a new QML API"
url="http://qt-project.org/"
packager="tnut <tnut@nutyx.org>"
contributors="Pierre B"

name=qt-webkit
version=5.9.0
release=1

_name="qtwebkit-opensource-src"

source=(https://download.qt.io/community_releases/5.9/${version}-final/${_name}-${version}.tar.xz
        qt-webkit-5.8.0-icu_59-1.patch)

build() {
  cd ${_name}-${version}
  patch -p1 -i ../qt-webkit-5.8.0-icu_59-1.patch
  qmake
  make
  make INSTALL_ROOT="$PKG" install

  # Drop QMAKE_PRL_BUILD_DIR because reference the build dir
  find "$PKG/usr/lib" -type f -name '*.prl' \
       -exec sed -i -e '/^QMAKE_PRL_BUILD_DIR/d' {} \;
}


